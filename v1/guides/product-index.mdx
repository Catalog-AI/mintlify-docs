---
title: "Building a Product Index"
description: "How to build and maintain your own product index using the Catalog API"
---

Build and maintain your own product index using Catalog's browse, crawl, and product endpoints. Choose the approach that best fits your needs: browse existing vendors that Catalog has already discovered, or crawl new vendors to ensure you have the latest data.

<Note>
This guide covers multiple approaches: browsing existing vendors via [`GET /v1/vendors`](/v1/api-reference/endpoints/discover/get-vendors), discovering new product listings via [`POST /v1/crawl`](/v1/api-reference/endpoints/discover/crawl), and adding missing products via [`POST /v1/products`](/v1/api-reference/endpoints/extract/retrieve-products).
</Note>

## Option 1: Browse Existing Vendors

If the vendors you want to index are already available in Catalog's system, you can browse and index their products directly without crawling.

### Step 1: Discover vendors

Use [`GET /v1/vendors`](/v1/api-reference/endpoints/discover/get-vendors) to discover which vendors are available and how many products they have.

You can use this to:
- Select a subset of vendors to index (e.g., only fashion brands)
- Prioritize vendors with a larger `product_count`
- Check if your target vendor is already available

**If your vendor is not found:** See [Option 2: Crawl and Extract](#option-2-crawl-and-extract) below to discover and index new vendors.

### Step 2: Enumerate collections (optional)

If your chosen vendors support collections, you can use [`POST /v1/collections`](/v1/api-reference/endpoints/discover/get-collections) to:
- Retrieve collections (e.g., "New In", "Sale", "Shoes")
- Decide which collections to index (e.g., only "New Arrivals" or "Top Sellers")

This helps you build a more structured index (vendor → collection → products).

### Step 3: List products per vendor or collection

Use [`POST /v1/listings`](/v1/api-reference/endpoints/discover/get-listings) to page through all products for a vendor or collection. As you page through:
- Extract the **canonical product URLs** from each listing
- Store product URLs in your own database or search index
- Record lightweight metadata (vendor, handle/slug, collection, timestamps) for faster lookups

### Step 4: Hydrate full product data

Once you have a list of product URLs, use [`POST /v1/products`](/v1/api-reference/endpoints/extract/retrieve-products) to hydrate many URLs in a single request (up to 1000 URLs per request).

**Typical flow:**

1. Pull a batch of URLs from your queue or database
2. Call `POST /v1/products` with up to 1000 URLs per request
3. Receive an `execution_id` and poll [`GET /v1/products/{execution_id}`](/v1/api-reference/endpoints/extract/get-products-execution-status)
4. For each result in the completed execution:
   - If `success === true`: Upsert the product into your index (search engine, DB, vector store, etc.)
   - If `success === false`: Optionally log the `outcome`/reason and decide whether to retry later

You can repeat this process on a schedule (e.g., every few hours) to keep your index fresh.

## Option 2: Crawl New Vendors

If your vendor is not yet available in Catalog, or you want to ensure you have the most up-to-date product data, use the crawl workflow. This is the recommended approach for discovering and indexing new vendors.

### Step 1: Start with Crawl

Use [`POST /v1/crawl`](/v1/api-reference/endpoints/discover/crawl) to discover all product listings from a vendor website. This endpoint:
- Discovers collections from the vendor
- Extracts product listings from each collection

**Typical flow:**

1. Start a crawl by calling `POST /v1/crawl` with the vendor URL:
   ```json
   {
     "url": "https://www.example.com"
   }
   ```

2. Receive an `execution_id` immediately (format: `crawl-{hostname}-{uuid}`)

3. Poll [`GET /v1/crawl/{execution_id}`](/v1/api-reference/endpoints/discover/get-crawl-status) to check progress:
   - Status will be `"pending"`, `"running"`, `"completed"`, or `"failed"`
   - When `status === "completed"`, you'll see `total_listings_found` indicating how many products were discovered

4. The crawl process automatically discovers and indexes all product listings from the vendor

<Note>
**Billing Requirement:** Crawl requests require auto top-up to be enabled in your billing settings. This ensures you have sufficient credits to complete the crawl operation.
</Note>

### Step 2: Add Missing Products

Use [`POST /v1/products`](/v1/api-reference/endpoints/extract/retrieve-products) to add any products whose listings weren't discovered during crawl, or to refresh specific products from your own URL list.

**Use cases:**
- Products from your internal catalog
- Affiliate links or merchant feeds
- Hand-curated collections
- Products that failed during extraction

**Typical flow:**

1. Collect URLs that need to be added or refreshed (up to 1000 URLs per request)

2. Call `POST /v1/products` with your batch:
   ```json
   {
     "urls": [
       "https://www.example.com/product/1",
       "https://www.example.com/product/2"
     ],
     "enable_enrichment": true,
     "country_code": "us"
   }
   ```

3. Receive an `execution_id` immediately (format: `products-batch-{uuid}`)

4. Poll [`GET /v1/products/{execution_id}`](/v1/api-reference/endpoints/extract/get-products-execution-status) to check progress

5. When `status === "completed"`, retrieve paginated results and upsert successful products into your index

## Choosing an Approach

**Use Browse Existing Vendors (Option 1)** when:
- Your target vendors are already available in Catalog
- You want to quickly index products without waiting for crawl/extract
- You're building on top of Catalog's existing product database

**Use Crawl New Vendors (Option 2)** when:
- Your vendor is not yet available in Catalog
- You want to ensure you have the most up-to-date product data
- You need to discover new product listings and collections from a vendor

In practice, many integrations combine both approaches:
- Browse existing vendors for quick indexing
- Crawl new vendors or refresh existing ones periodically
- Use the Products endpoint for targeted updates of specific items

## Keeping Your Index Fresh

To maintain a high-quality product index:

**Schedule re-crawling:** Periodically re-crawl vendor websites to discover new product listings and collections.

**Monitor failures:** Use `success` and `outcome` fields to detect:
- Non-product URLs
- Unsupported vendors
- Products that have been removed

**Prune stale products:** Remove (or downgrade) products that consistently fail to process or are no longer available.

**Use Products endpoint for targeted updates:** For specific products that need frequent updates (e.g., featured items), use the Products endpoint to refresh them more frequently than the full extract cycle.

## Related endpoints

<CardGroup cols={2}>
  <Card title="/crawl" icon="spider" href="/v1/api-reference/endpoints/discover/crawl">
    Discover collections and product listings
  </Card>
  <Card title="/products" icon="box" href="/v1/api-reference/endpoints/extract/retrieve-products">
    Extract high-quality, real-time product data
  </Card>
  <Card title="/vendors" icon="store" href="/v1/api-reference/endpoints/discover/get-vendors">
    List indexed vendors
  </Card>
  <Card title="/collections" icon="folder" href="/v1/api-reference/endpoints/discover/get-collections">
    List indexed collections for a given vendor
  </Card>
  <Card title="/listings" icon="list" href="/v1/api-reference/endpoints/discover/get-listings">
    List indexed product listings for a given vendor
  </Card>
</CardGroup>
